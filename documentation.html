<!doctype html>
<html lang="en">
  <head>
    <title>Documentation - Bedrunka API</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
      body {
        margin: 20px;
      }

      table, th, td {
        border-width: 1px;
        border-style: solid;
        border-collapse: collapse;
        text-align: left;
        padding: 5px;
      }
    </style>
  </head>

  <body>
    <h1>Bedrunka API</h1>
    <div>
      Documentation of RESTful API of Bedrunka website. The API uses HTTP 1.1 method for every function it provides.

    </div>
    <h2>Requests</h2>
    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>Action</th>
          <th>RESTful behaviour</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>GET</td>
          <td>Retrieve products</td>
          <td>Safe - no side effects, as well as the same two requests result in the same retrieval</td>
        </tr>
        <tr>
          <td>POST</td>
          <td>Create new products</td>
          <td>Two exact same requests result in two different creations of products</td>
        </tr>
        <tr>
          <td>PUT</td>
          <td>Change already existing products</td>
          <td>Two identical requests lead to second request not changing anything</td>
        </tr>
        <tr>
          <td>DELETE</td>
          <td>Delete products</td>
          <td>Two identical requests lead to only one deletion of a product</td>
        </tr>
      </tbody>
    </table>

    <h2>Responses</h2>
    <h3>Product object</h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Description</th>
          <th>Type</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>product</td>
          <td>The name of the product</td>
          <td>String</td>
        </tr>
        <tr>
          <td>origin</td>
          <td>The country of origin of the product</td>
          <td>String</td>
        </tr>
        <tr>
          <td>best_before_date</td>
          <td>Expiration date (month)</td>
          <td>Date</td>
        </tr>
        <tr>
          <td>amount</td>
          <td>Amount available in our store</td>
          <td>Number</td>
        </tr>
        <tr>
          <td>image</td>
          <td>URL to an image of the product</td>
          <td>URL</td>
        </tr>
      </tbody>
    </table>

    <h2>API Reference</h2>

    <!-- GET -->
    <div>
      <h3>GET api/products</h3>
      <h4>Resource information</h4>
      <table>
        <tbody>
          <tr>
            <td>Format</td>
            <td>JSON</td>
          </tr>
          <tr>
            <td>Rate limit</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Requires authentication?</td>
            <td>No</td>
          </tr>
        </tbody>
      </table>
      <h4>Parameters</h4>
      <p>By default <code>GET products</code> will return all products.</p>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Required</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>id</td>
            <td>optional</td>
            <td>The identifier of the product</td>
            <td>13123</td>
          </tr>
        </tbody>
      </table>
      <h4>Example</h4>
      <h5>Request</h5>
      <code>
        GET api/products/13123 HTTP/1.1<br>
        Host: localhost:3000<br>
        Content-Type: application/json<br>
        User-Agent: Mozilla/5.0 Chrome/48.0.2564
      </code>
      <h5>Response</h5>
      <code>
        HTTP/1.1 201 Created<br>
        Content-Type: text/plain; charset=utf-8<br>
        Content-Length: 1<br>
        Date: Mon, 18 Jan 2021 14:16:29 GMT<br>
        ETag: W/"66-cZws74LP8XEnwbIEyLgWFw"<br>
        X-Powered-By: Express<br>
        <br>
        [{"id":13123,"product":"Apples","origin":"The Netherlands","best_before_date":"November 2019","amount":"100kg","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Apples.jpg/512px-Apples.jpg%22%7D]
      </code>
      <h4>Possible error codes</h4>
      <table>
        <thead>
          <tr>
            <th>Error code</th>
            <th>Description of error</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2XX</td>
            <td>Successful <code>GET</code> request</td>
          </tr>
          <tr>
            <td>4XX</td>
            <td>There was an error on client side, could not find the resource to <code>GET</code>.</td>
          </tr>
          <tr>
            <td>5XX</td>
            <td>Error occured on server side, <code>GET</code> could not access the resource.</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- POST -->
    <div>
      <h3>POST api/products</h3>
      <h4>Resource information</h4>
      <table>
        <tbody>
          <tr>
            <td>Format</td>
            <td>JSON</td>
          </tr>
          <tr>
            <td>Rate limit</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Requires authentication?</td>
            <td>No</td>
          </tr>
        </tbody>
      </table>
      <h4>Example</h4>
      <h5>Request</h5>
      <code>
        POST /api/products HTTP/1.1<br>
        Host: localhost:3000<br>
        Content-Type: application/json<br>
        User-Agent: Mozilla/5.0 Chrome/48.0.2564<br>
        <br>
        {<br>
          "product": "Cinnamon",<br>
          "origin": "Egypt",<br>
          "best_before_date": "June 2021",<br>
          "amount": "24",<br>
          "image": "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.dietspotlight.com%2Fwp-content%2Fuploads%2FCinnamon-1.png&f=1&nofb=1"<br>
        }
      </code>
      <h5>Response</h5>
      <code>
        HTTP/1.1 201 Created<br>
        Content-Type: text/plain; charset=utf-8<br>
        Content-Length: 1<br>
        Date: Mon, 18 Jan 2021 14:16:29 GMT<br>
        ETag: W/"66-cZws74LP8XEnwbIEyLgWFw"<br>
        X-Powered-By: Express<br>
        <br>
        Created product
      </code>
      <h4>Possible error codes</h4>
      <table>
        <thead>
          <tr>
            <th>Error code</th>
            <th>Description of error</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2XX</td>
            <td>Data sent successfully.</td>
          </tr>
          <tr>
            <td>4XX</td>
            <td>Data was not sent due to client error.</td>
          </tr>
          <tr>
            <td>5XX</td>
            <td>Data was not sent due to server error</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- PUT -->
    <div>
      <h3>PUT api/products</h3>
      <h4>Resource information</h4>
      <table>
        <tbody>
          <tr>
            <td>Format</td>
            <td>JSON</td>
          </tr>
          <tr>
            <td>Rate limit</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Requires authentication?</td>
            <td>No</td>
          </tr>
        </tbody>
      </table>
      <h4>Example</h4>
      <p>Annotation: request body in <code>PUT</code> requires an id parameter.</p>
      <h5>Request</h5>
      <code>
        PUT /api/products HTTP/1.1<br>
        Host: localhost:3000<br>
        Content-Type: application/json<br>
        User-Agent: Mozilla/5.0 Chrome/48.0.2564<br>
        <br>
        {<br>
          "id": "13123",<br>
          "product": "Cinnamon",<br>
          "origin": "Egypt",<br>
          "best_before_date": "June 2021",<br>
          "amount": "24",<br>
          "image": "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.dietspotlight.com%2Fwp-content%2Fuploads%2FCinnamon-1.png&f=1&nofb=1"<br>
        }
      </code>
      <h5>Response</h5>
      <code>
        HTTP/1.1 200 OK<br>
        Date: Mon, 18 Jan 2021 14:31:35 GMT<br>
        ETag: W/"a-oQDOV50e1MN2H/N8GYi+8w"<br>
        X-Powered-By: Express<br>
        <br>
        Updated product
      </code>
      <h4>Possible error codes</h4>
      <table>
        <thead>
          <tr>
            <th>Error code</th>
            <th>Description of error</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2XX</td>
            <td>Successful <code>PUT</code> request</td>
          </tr>
          <tr>
            <td>4XX</td>
            <td>There was an error on client side. Could not find the resource.</td>
          </tr>
          <tr>
            <td>5XX</td>
            <td>Error occured on server side.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- DELETE -->
    <div>
      <h3>DELETE api/products</h3>
      <h4>Resource information</h4>
      <table>
        <tbody>
          <tr>
            <td>Format</td>
            <td>JSON</td>
          </tr>
          <tr>
            <td>Rate limit</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Requires authentication?</td>
            <td>No</td>
          </tr>
        </tbody>
      </table>
      <h4>Parameters</h4>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Required</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>id</td>
            <td>required</td>
            <td>The identifier of the product</td>
            <td>13123</td>
          </tr>
        </tbody>
      </table>
      <h4>Example</h4>
      <h5>Request</h5>
      <code>
        DELETE /api/products/13123 HTTP/1.1<br>
        Host: localhost:3000<br>
        User-Agent: Mozilla/5.0 Chrome/48.0.2564
      </code>
      <h5>Response</h5>
      <code>
        HTTP/1.1 204 No Content<br>
        Date: Mon, 18 Jan 2021 14:31:35 GMT<br>
        ETag: W/"a-oQDOV50e1MN2H/N8GYi+8w"<br>
        X-Powered-By: Express<br>
        <br>
        Deleted product
      </code>
      <h4>Possible error codes</h4>
      <table>
        <thead>
          <tr>
            <th>Error code</th>
            <th>Description of error</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2XX</td>
            <td>Successfully deleted resource</td>
          </tr>
          <tr>
            <td>4XX</td>
            <td>There was an error on client side. Could not find the resource.</td>
          </tr>
          <tr>
            <td>5XX</td>
            <td>Error occured on server side.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h2>Timestamps</h2>
    <p>Dates are returned in <em>MMMM YYYY</em> format.</p>

    <h2>CORS</h2>
    <p>CORS works for this server and is bound to one specific origin.</p>
    <p>In order to make the server work with website, server.js needs to be changed - in CORS options at the top, change the origin to the domain used for Bedrunka.</p>

    <h2>Status Response Codes</h2>
    <table>
      <thead>
        <tr>
          <th>Status Code</th>
          <th>Status Title</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>200</td>
          <td>OK</td>
          <td>The request has succeeded.</td>
        </tr>
        <tr>
          <td>201</td>
          <td>Created</td>
          <td>The request has been fulfilled and resulted in a new resource being created.</td>
        </tr>
        <tr>
          <td>204</td>
          <td>No Content</td>
          <td>The request has succeeded but returns no message body.</td>
        </tr>
        <tr>
          <td>400</td>
          <td>Bad Request</td>
          <td>The request could not be understood by the server due to malformed syntax. 
              The message body will contain more information.</td>
        </tr>
        <tr>
          <td>403</td>
          <td>Forbidden</td>
          <td>The server understood the request, but is refusing to fulfill it.</td>
        </tr>
        <tr>
          <td>404</td>
          <td>Not Found</td>
          <td>The requested product could not be found.</td>
        </tr>
        <tr>
          <td>429</td>
          <td>Too Many Requests</td>
          <td>User has sent too many requests in a given amount of time.</td>
        </tr>
        <tr>
          <td>500</td>
          <td>Internal Server Error</td>
          <td>The server has encountered a situation it doesn't know how to handle.</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>